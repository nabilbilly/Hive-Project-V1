
{% extends '../component/base.html' %}

{% block title %}Page Title{% endblock %}
  <!-- Main Container -->
  {% load static %}
{% block content %}

    <style>
        body {
            font-family: 'Poppins', sans-serif;
        }
        .select2-container .select2-selection--multiple {
            height: auto;
            padding: 8px;
            border: 2px solid black;
            border-radius: 8px;
        }
        .select2-selection__choice {
            color: black;
            font-size: 14px;
        }
        .selected {
            background-color: #FFC22666 !important;
        }
        .select2-results__option--highlighted[aria-selected] {
            background-color: #FDCE02 !important; /* Change hover color */
            color: black !important; /* Text color */
        }
    </style>

     <!-- Logo Section -->
    <div class="flex items-start pt-6 mb-6 px-4 sm:px-6 md:px-8 lg:px-16 xl:px-20">
        <!-- <a href="#"> <img src="{% static 'images/logo/CashHivelogo.png' %}" alt="Hive Logo" class="h-10 mr-3"> </a>
         -->
         <a href="#"> <img src="{% static 'images/logo/CashHivelogo.png' %}" alt="Hive Logo" class="h-10 mr-3"> </a>
        
    </div>
    <div class="w-full max-w-3xl mb-8 p-6">
        <!-- Title and Subtitle -->
        <h2 class="text-lg  font-bold text-center lg:text-2xl  text-gray-900 mb-2">What are your geographical preferences? &nbsp;</h2>
    </div>
    <div class="bg-white flex items-center justify-center ">
        <form id="interestForm" method="post">
            {% csrf_token %}
            {% if messages %}
            <ul class="messages mb-4">
                {% for message in messages %}
                <li class="bg-yellow-50 border border-yellow-400 rounded text-yellow-800 text-sm flex items-center justify-between p-2 mb-2 relative">
                    <div class="flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />
                        </svg>
                        <p class="flex-1 mt-3">
                            <span class="font-bold">Info:</span>
                            {{ message }}
                        </p>
                    </div>
                    <button type="button" class="ml-3 text-yellow-800 hover:text-yellow-600" aria-label="Close" onclick="removeMessage(this)">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </li>
                {% endfor %}
            </ul>
            {% endif %}
        
    </div> 
   
    <div class="flex flex-col items-center pb-10 px-4 sm:px-8 lg:px-32 bg-white px-4 sm:px-6 md:px-8 lg:pl-52 lg:pr-42 xl:px-20">
        <!-- Step-by-step Sidebar -->
        <div class="flex items-start w-full lg:justify-between">
            <div class="hidden lg:flex flex-col items-center mr-6">
                <div class="flex flex-col items-center">
                    <div class="w-16 h-16  border-2 border-black rounded-full flex items-center justify-center" style="background:#FDCE02">
                        <span class="text-black font-lg text-sm">7/13</span>
                    </div>
                    <div class="border-l-2 border-gray-300 border-dashed h-12  w-0.5"></div>
                </div>
    
                <div class="w-16 h-16  border-2 border-black rounded-full flex items-center justify-center" style="background:#FDCE02">
                    <svg width="24" height="24" viewBox="0 0 79 79" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M13.1673 62.5423V26.334H65.834V37.1636C68.204 37.8877 70.4423 38.9411 72.4173 40.3565V26.334C72.4173 22.6802 69.4877 19.7507 65.834 19.7507H52.6673V13.1673C52.6673 9.51357 49.7377 6.58398 46.084 6.58398H32.9173C29.2636 6.58398 26.334 9.51357 26.334 13.1673V19.7507H13.1673C9.51357 19.7507 6.6169 22.6802 6.6169 26.334L6.58398 62.5423C6.58398 66.1961 9.51357 69.1257 13.1673 69.1257H38.4473C37.4598 67.0848 36.8015 64.8794 36.4723 62.5423H13.1673ZM32.9173 13.1673H46.084V19.7507H32.9173V13.1673Z" fill="black"/>
                        <path d="M59.2493 42.791C50.1643 42.791 42.791 50.1643 42.791 59.2493C42.791 68.3343 50.1643 75.7077 59.2493 75.7077C68.3343 75.7077 75.7077 68.3343 75.7077 59.2493C75.7077 50.1643 68.3343 42.791 59.2493 42.791ZM64.6806 66.9848L57.6035 59.9077V49.3743H60.8952V58.5581L66.9848 64.6477L64.6806 66.9848Z" fill="black"/>
                    </svg>
                </div>
    
                <div class="border-l-2 border-gray-300 border-dashed h-12  w-0.5"></div>
    
                <div class="w-16 h-16  border-2 border-black rounded-full flex items-center justify-center " style="background:#FDCE02">
                    <svg width="24" height="24" viewBox="0 0 87 87" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M43.498 72.166C58.3407 72.166 70.373 60.1337 70.373 45.291C70.373 30.4483 58.3407 18.416 43.498 18.416C28.6553 18.416 16.623 30.4483 16.623 45.291C16.623 60.1337 28.6553 72.166 43.498 72.166Z" stroke="black" stroke-width="7.16667" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M36.3317 20.209C39.5652 22.0155 42.6026 24.6882 42.348 28.1737C42.1444 30.959 39.7624 31.5805 39.2642 33.5947C38.7663 35.6089 41.648 37.8062 36.7728 41.0568C33.5228 43.2238 23.7378 47.3432 16.623 43.5007" stroke="black" stroke-width="7.16667" stroke-linecap="round"/>
                        <path d="M17.5213 44.394C12.1463 47.7772 4.20589 56.9733 7.66796 63.2065C12.1461 71.269 29.1677 64.4438 48.8755 48.8731C68.5834 33.3025 76.1608 10.543 76.1608 10.543L66.7929 13.0398" stroke="black" stroke-width="7.16667" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M47.0859 72.1673C47.0859 72.1673 47.9812 63.209 54.2515 57.834C60.5218 52.459 68.5861 52.459 68.5861 52.459" stroke="black" stroke-width="7.16667" stroke-linecap="round"/>
                        </svg>
                </div>
            </div>
    
            <!-- Main Content -->
            <div class="flex flex-col items-center lg:items-start w-full lg:w-2/2 lg:pl-16 ">
                <div class="text-center lg:text-left " style="width: 60%;">
                    <select name="countries" id="countries" class="category-btn w-50 border-2 border-black  text-sm lg:w-1/2 p-3  mb-5 rounded-lg hover:bg-yellow-400" multiple data-id="{{ option.id }}">
                        <!-- Country options -->
                        {% for option in Country %}
                            <option value="{{option.id}}">{{option.name}}</option>
                        {% endfor %}
                    </select>
                </div>
              
                <script>
                    $(document).ready(function() {
                        $('#countries').select2({
                            placeholder: "Input preferred location",
                            allowClear: true,
                            width: '100%'
                        });
                    });
                </script>  
                
                <div class="flex items-center mt-10 mb-4">
                    <input id="work-location" type="checkbox" class="form-checkbox h-5 w-5 text-yellow-500 rounded focus:ring-0" />
                    <label for="work-location" class="ml-3 text-sm text-gray-800">
                        Includes jobs from where you want to work in:
                    </label>
                </div>
                
                <div class="grid grid-cols-2 sm:grid-cols-3 gap-5 mt-4">
                    {% for option in interest_options %}
                    <button type="button" class="category-btn px-2 py-2 rounded-lg bg-gray-200 text-gray-800 text-sm font-medium" data-id="{{ option.id }}">
                        {{ option.name }}
                    </button>
                    {% endfor %}
                </div>
                <input type="hidden" name="location_work" id="location_work">
                <!-- Checkbox 2 -->
                <div class="flex justify-center items-center mb-4 mt-7 px-4 sm:px-6 md:px-32 lg:px-0 ">
                    <input id="work-anywhere" type="checkbox" class="form-checkbox h-5 w-5 text-yellow-500 rounded focus:ring-0 sm:-mt-2" />
                    <label for="work-anywhere" class="ml-3 text-sm text-gray-800">
                        Includes jobs from all part of the Globe.
                    </label>
                </div>
            </div>
       </div>
            
            <div class="bg-white flex items-center justify-center space-x-7">
                <button class="text-gray-700 font-md px-4 py-2 bg-yellow-400 hover:bg-yellow-500 rounded-md w-30" type="submit">Continue</button>
            </div>
        
    </div>
   </form> 
   <div class="bg-white flex items-center justify-center space-x-7">
    <a href="{% url 'English-Level' %}">
        <button class="bg-gray-300 text-gray-700 hover:text-gray-800 font-md px-4 py-2 rounded-md w-30">Back</button>
    </a>
    <div class="bg-white flex items-center justify-center py-12">
        <a href="{% url 'Employment-Option' %}" class=" font-medium "  style="color:#FDCE02">Skip Now</a>  
    </div>
</div>
   <script>
    function removeMessage(button) {
        const messageItem = button.closest('li');
        if (messageItem) {
            messageItem.remove();
        }
    }

  
</script>
<script>
    document.addEventListener('DOMContentLoaded', function() {
        const form = document.getElementById('interestForm');
        const selectedCategoriesInput = document.getElementById('location_work');
        const buttons = document.querySelectorAll('.category-btn');
        const selectedCategories = new Set();

        // Load saved categories if they exist
        const savedCategories = selectedCategoriesInput.value;
        if (savedCategories) {
            savedCategories.split(',').forEach(id => {
                selectedCategories.add(id);
                const button = document.querySelector(`[data-id="${id}"]`);
                if (button) {
                    button.classList.add('selected');
                    button.style.background = '#FFC22666';
                }
            });
        }

        buttons.forEach(button => {
            button.addEventListener('click', function() {
                const categoryId = this.dataset.id;
                
                if (selectedCategories.has(categoryId)) {
                    selectedCategories.delete(categoryId);
                    this.classList.remove('selected');
                    this.style.background = '';
                } else {
                    selectedCategories.add(categoryId);
                    this.classList.add('selected');
                    this.style.background = '#FFC22666';
                }
                
                selectedCategoriesInput.value = Array.from(selectedCategories).join(',');
            });
        });

        document.querySelector('.next-button').addEventListener('click', function(e) {
            e.preventDefault();
            if (selectedCategories.size === 0) {
                alert('Please select at least one category');
                return;
            }
            form.submit();
        });
    });
</script>

{%endblock%}